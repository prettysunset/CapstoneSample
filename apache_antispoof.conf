# Apache vhost snippet to proxy /antispoof -> local antispoof service
# Replace ServerName and DocumentRoot with your site's values.

<VirtualHost *:443>
    ServerName ojtms.com
    DocumentRoot "C:/xampp/htdocs/capstone_sample/CapstoneSample"

    # Ensure proxy modules are enabled: proxy, proxy_http
    ProxyPreserveHost On

    # Proxy the antispoof path to the local service
    ProxyPass "/antispoof" "http://127.0.0.1:5001/"
    ProxyPassReverse "/antispoof" "http://127.0.0.1:5001/"

    # Expose the proxied URL to PHP so pc_per_office.php can pick it up
    # Public proxied URL for client
    SetEnv ANTISPOOF_URL "https://ojtms.com/antispoof"

    # (Optional) restrict access by IP
    # <Location /antispoof>
    #   Require ip 192.168.1.0/24
    # </Location>

    # SSL configuration: ensure you have valid cert and key configured for ojtms.com
    SSLEngine on
    SSLCertificateFile "C:/xampp/apache/conf/ssl.crt/server.crt"
    SSLCertificateKeyFile "C:/xampp/apache/conf/ssl.key/server.key"
</VirtualHost>
